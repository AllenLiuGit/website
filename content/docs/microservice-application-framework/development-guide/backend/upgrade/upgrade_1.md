+++
title = "2017-11-20"
date = "2017-11-20"
draft = false
weight = 1
+++
# 2017-11-20

## 后端新功能特性

* 全局层(global)权限
  在原本的三层权限结构中新增加一层独立于三层结构之外的全局层权限，全局层权限的管辖范围包括不属于特定组织或组织下相应项目资源的一些的一些权限。例如新建组织、删除组织、角色管理、菜单管理等相关操作权限就属于全局层。

* 新菜单模式
  菜单分为三个入口，组织层、项目层、全局层。未配置时菜单，根据系统原有菜单表的顺序返回默认菜单。管理员可以自定义自己的菜单结构。并可以恢复默认菜单

* 角色可定义
  管理员可以自己创建角色并自定义角色之下的权限。系统原有的角色将不能修改。
  
## 注意事项
1. 初始化数据库
升级后初始化数据库时，如果开发人员想保留原有数据库数据，在初始化数据库相关job或shell脚本，将参数data.drop设置成false。可能会出现报错等情况，由于开发人员未正确使用groovy脚本。当出现这种情况自己不能解决是，又想保留原有数据时，联系我们。

2. 角色管理
由代码初始化的角色为系统内置角色，内置角色不能进行修改，只有在界面上自定义的角色才能进行修改。角色还有一个启用和是否启用的配置。未启用的角色将不能分配。

3. 菜单管理
可以在平台界面上创建菜单目录，自定义菜单结构。新的菜单返回将与用户所具有权限无关，由前端判断该菜单是否有权限显示。

