+++
title = "配置管理"
weight = 7
+++

# 配置管理

配置管理界面可以自己创建配置,配置一旦创建，不可以修改，只能基于这个配置创建一个新的配置。

配置与微服务的关系：微服务与配置为一对多的从属关系。一个微服务可以有多个配置，一个配置只能属于一个微服务。

配置与实例的关系：配置与实例为一对多的应用关系。同一个微服务下，一个配置可以被多个实例应用，一个实例只能应用一个配置。

**功能：**

- [配置列表](#1)
- [配置查询](#2)
- [配置详情](#3)
- [创建配置](#4)
- [基于一个已有配置创建配置](#5)
- [默认配置](#6)
- [应用配置](#7)
- [删除配置](#8)

<h2 id="1">配置列表</h2>

列表字段：  

- **配置ID**：配置ID具有唯一性，是配置的标识。配置ID根据所属服务系统自动生成，系统生成规则为所属服务名加上配置ID生成时间戳，用户也可以自己编辑。配置ID不能为空，不能包含汉字和特殊字符。
- 配置版本：配置版本是用户自定义的，可以和常见版本命名一样，如1.2.0。
- 所属微服务：配置属于的微服务的微服务名称。微服务名称是微服务的标识。
- 是否为默认：是否为默认配置。布尔类型的字段。如果不为默认配置，列表中该字段的值为空，如果为默认配置，界面上该字段的值为“是”。一个微服务只能有一个默认配置，如果设置当前配置为默认配置，那么上一个默认配置失效。默认配置的作用是，如果在该配置所属的微服务下新建实例，那么这个新建的实例自动应用默认配置。
- 应用实例数：应用该配置的实例的个数。

<h2 id="2">配置查询</h2>

可查询字段：

- **配置ID**：配置ID是配置的标识，可以根据配置ID查询配置。
- 所属微服务：所属微服务的字段值为微服务名称。输入微服务名称，显示该微服务下的所有配置。

<h2 id="3">配置详情</h2>

详情字段：

- **配置ID**：配置ID具有唯一性，是配置的标识。配置ID根据所属服务系统自动生成，系统生成规则为所属服务名加上配置ID生成时间戳，用户也可以自己编辑。配置ID不能为空，不能包含汉字和特殊字符。
- 配置版本：配置版本是用户自定义的，可以和常见版本命名一样，如1.2.0。
- 所属微服务：配置属于的微服务的微服务名称。微服务名称是微服务的标识。
- 是否为默认：若值为是，则为默认配置；若值为否，则为非默认配置。一个微服务只能有一个默认配置，如果设置当前配置为默认配置，则上一个默认配置失效。默认配置的作用是，如果在该配置所属的微服务下新建实例，则这个新建的实例自动应用默认配置。
- 应用实例数：应用该配置的实例的个数。
- 创建日期：配置创建成功的日期。格式为`年-月-日 时:分:秒`。
- 来源：分为工具生成和页面创建两种。如果是用户在界面创建的配置，则来源为页面创建。否则为工具生成。
- 配置项：可以是大于等于零条配置项。

<h2 id="4">创建配置</h2>

必填字段：

- 所属微服务：配置属于的微服务的微服务名称。微服务名称是微服务的标识。只有先选择所属微服务，才能编辑配置ID，否则不能编辑。
- **配置ID**：配置ID具有唯一性，是配置的标识。配置ID根据所属服务系统自动生成，系统生成规则为所属服务名加上配置ID生成时间戳，用户也可以自己编辑。配置ID不能为空，不能包含汉字和特殊字符。
- 配置版本：配置版本是用户自定义的，可以和常见版本命名一样，如1.2.0。

选填字段：

- 是否为默认：如果没有勾选，则不为默认配置；如果勾选，则为默认配置，并使上一个默认配置变为非默认配置。一个微服务只能有一个默认配置，如果设置当前配置为默认配置，则上一个默认配置失效。默认配置的作用是，如果在该配置所属的微服务下新建实例，则这个新建的实例自动应用默认配置。
- 配置项：可以是大于等于零条配置项。允许踹西安名字非空、值为空的配置项，不允许出先名字为空、值非空的配置项。

<h2 id="5">基于一个已有配置创建配置</h2>

必填字段：

- 所属微服务：继承了已有配置的所属微服务，新配置将不可更改该字段的值
- **配置ID**：配置ID具有唯一性，是配置的标识。配置ID根据所属服务系统自动生成，系统生成规则为所属服务名加上配置ID生成时间戳，用户也可以自己编辑。配置ID不能为空，不能包含汉字和特殊字符。
- 配置版本：配置版本是用户自定义的，可以和常见版本命名一样，如1.2.0。

选填字段：

- 是否为默认：如果没有勾选，则不为默认配置；如果勾选，则为默认配置，并使上一个默认配置变为非默认配置。一个微服务只能有一个默认配置，如果设置当前配置为默认配置，则上一个默认配置失效。默认配置的作用是，如果在该配置所属的微服务下新建实例，则这个新建的实例自动应用默认配置。
- 配置项：继承了已有配置的配置项，并可对这些配置项删除可修改，也可以增加新的配置项。可以是大于等于零条配置项。允许出现名字非空、值为空的配置项，不允许出现名字为空、值非空的配置项。

<h2 id="6">默认配置</h2>

一个微服务只能有一个默认配置，如果设置当前配置为默认配置，则上一个默认配置失效。默认配置的作用是，如果在该配置所属的微服务下新建实例，则这个新建的实例自动应用默认配置。

<h2 id="7">应用配置</h2>

即实例应用配置。一个配置可被多个实例应用。

下图为同一个微服务下，配置被实例应用的关系图。

![实例应用配置关系图](/docs/user-guide/api/image/config_instance.png)

<h2 id="8">删除配置</h2>

如果一个配置下应用该配置的实例个数为零，则可以删除该配置，否则，不可以删除该配置。